(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chat-groupchat"],{"04bf":function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return o})),s.d(t,"a",(function(){return n}));var n={useHeader:s("524d").default,usePopup:s("ab4a").default},i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-uni-view",[s("use-header",{attrs:{title:e.ToUserInfo.groupName}},[s("v-uni-view",{staticClass:"use-hover"},[s("v-uni-view",{staticClass:"iconfont iconhaoyouziliao padding-sm pos-r",staticStyle:{"z-index":"999",top:"0rpx","font-size":"52rpx"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toUser.apply(void 0,arguments)}}}),s("v-uni-view",{staticStyle:{width:"26vw"}})],1)],1),s("v-uni-view",{staticClass:"chat-content pos-a w-full",style:{top:"calc(44px + "+e.statusBarHeight+")"}},[s("v-uni-scroll-view",{staticClass:"chat-scroll wh-full padding",attrs:{"scroll-y":"true","scroll-top":e.scrollTop,"scroll-into-view":e.scrollIntoIndex,"scroll-with-animation":e.scrollAnimation}},e._l(e.messageList,(function(t,n){return s("v-uni-view",{key:n,attrs:{id:"chatItem_"+n}},[s("v-uni-view",{staticClass:"chat-item dflex-c fs-xs"},[e._v(e._s(t.time))]),t.meFlag?s("v-uni-view",{staticClass:"chat-item dflex-e"},[s("v-uni-view",{staticClass:"padding-tb-sm padding-lr bg-base border-radius-sm"},[s("v-uni-text",[e._v(e._s(t.text))])],1),s("v-uni-image",{staticClass:"use-hover headimg margin-left-sm",attrs:{src:e.myUserInfo.profile}})],1):s("v-uni-view",{staticClass:"chat-item dflex-s"},[s("v-uni-image",{staticClass:"use-hover headimg margin-right-sm",attrs:{src:t.profile},on:{click:function(s){arguments[0]=s=e.$handleEvent(s),e.toUser(t)}}}),s("v-uni-view",{staticClass:"padding-tb-sm padding-lr bg-drak border-radius-sm"},[s("v-uni-text",[e._v(e._s(t.text))])],1)],1)],1)})),1)],1),s("v-uni-view",{staticClass:"chat-input pos-f dflex padding-tb-sm padding-left safe-area-inset-bottom w-full bg-drak",style:{bottom:e.moreShow||e.emojiShow?"29vh":"0"}},[s("v-uni-view",{staticClass:"use-input dflex-c border-radius-sm padding-lr-sm w-full",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.scrollToBottom()}}},[s("v-uni-input",{attrs:{type:"text","confirm-type":"send","confirm-hold":!0,"auto-height":"true",fixed:"true","cursor-spacing":"20"},on:{focus:function(t){arguments[0]=t=e.$handleEvent(t),e.onFocus.apply(void 0,arguments)},confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.send(),e.textMsg=null},keyboardheightchange:function(t){arguments[0]=t=e.$handleEvent(t),e.onKeyboardChange.apply(void 0,arguments)}},model:{value:e.textMsg,callback:function(t){e.textMsg=t},expression:"textMsg"}})],1),s("v-uni-view",{staticClass:"use-hover iconfont iconbiaoqing margin-lr-sm",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.emojiShow=!0,e.moreShow=!1}}}),s("v-uni-view",{staticClass:"use-hover iconfont icontianjia margin-right-sm",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.moreShow=!0,e.emojiShow=!1}}})],1),s("v-uni-view",{staticStyle:{height:"110rpx"}}),s("use-popup",{attrs:{mode:"bottom"},model:{value:e.emojiShow,callback:function(t){e.emojiShow=t},expression:"emojiShow"}},[s("v-uni-scroll-view",{staticStyle:{height:"29vh"},attrs:{"scroll-y":!0}},[s("v-uni-view",{staticClass:"face-area tac padding-sm dflex dflex-wrap-w"},[s("v-uni-text",{staticClass:"expression expression-dianzan"}),s("v-uni-text",{staticClass:"expression expression-bushufu"}),s("v-uni-text",{staticClass:"expression expression-bianbian"}),s("v-uni-text",{staticClass:"expression expression-fankun1"}),s("v-uni-text",{staticClass:"expression expression-feiwen"}),s("v-uni-text",{staticClass:"expression expression-ganmao"}),s("v-uni-text",{staticClass:"expression expression-huaixiao"}),s("v-uni-text",{staticClass:"expression expression-liuhan"}),s("v-uni-text",{staticClass:"expression expression-outu"}),s("v-uni-text",{staticClass:"expression expression-keshui"}),s("v-uni-text",{staticClass:"expression expression-renzhe"}),s("v-uni-text",{staticClass:"expression expression-santiaoxian"}),s("v-uni-text",{staticClass:"expression expression-guaiwu"}),s("v-uni-text",{staticClass:"expression expression-shoushang"}),s("v-uni-text",{staticClass:"expression expression-tianshi"}),s("v-uni-text",{staticClass:"expression expression-shuai"}),s("v-uni-text",{staticClass:"expression expression-xianwen"}),s("v-uni-text",{staticClass:"expression expression-xiaodiaodaya"}),s("v-uni-text",{staticClass:"expression expression-xiong"}),s("v-uni-text",{staticClass:"expression expression-yiwen"}),s("v-uni-text",{staticClass:"expression expression-yun"}),s("v-uni-text",{staticClass:"expression expression-liubixie"}),s("v-uni-text",{staticClass:"expression expression-shimo"}),s("v-uni-text",{staticClass:"expression expression-ku"}),s("v-uni-text",{staticClass:"expression expression-shengqi"}),s("v-uni-text",{staticClass:"expression expression-yousiliao"}),s("v-uni-text",{staticClass:"expression expression-en"}),s("v-uni-text",{staticClass:"expression expression-a"}),s("v-uni-text",{staticClass:"expression expression-bizui"}),s("v-uni-text",{staticClass:"expression expression-baiyan"}),s("v-uni-text",{staticClass:"expression expression-aixin"}),s("v-uni-text",{staticClass:"expression expression-dajing"}),s("v-uni-text",{staticClass:"expression expression-ziya"}),s("v-uni-text",{staticClass:"expression expression-daxiao"}),s("v-uni-text",{staticClass:"expression expression-esi"}),s("v-uni-text",{staticClass:"expression expression-fadai"}),s("v-uni-text",{staticClass:"expression expression-fankun"}),s("v-uni-text",{staticClass:"expression expression-ganga"}),s("v-uni-text",{staticClass:"expression expression-fennu"}),s("v-uni-text",{staticClass:"expression expression-hanyan"}),s("v-uni-text",{staticClass:"expression expression-jingkong"}),s("v-uni-text",{staticClass:"expression expression-haochi"}),s("v-uni-text",{staticClass:"expression expression-emo"}),s("v-uni-text",{staticClass:"expression expression-jingsong"}),s("v-uni-text",{staticClass:"expression expression-jingya"}),s("v-uni-text",{staticClass:"expression expression-kaixin"}),s("v-uni-text",{staticClass:"expression expression-lengku"}),s("v-uni-text",{staticClass:"expression expression-danao"}),s("v-uni-text",{staticClass:"expression expression-liukoushui"}),s("v-uni-text",{staticClass:"expression expression-liulei"}),s("v-uni-text",{staticClass:"expression expression-mengbi"}),s("v-uni-text",{staticClass:"expression expression-mianwubiaoqing"}),s("v-uni-text",{staticClass:"expression expression-nanguo"}),s("v-uni-text",{staticClass:"expression expression-shuizhuo"}),s("v-uni-text",{staticClass:"expression expression-taoyan"}),s("v-uni-text",{staticClass:"expression expression-tanchi"}),s("v-uni-text",{staticClass:"expression expression-siliao"}),s("v-uni-text",{staticClass:"expression expression-tiaopi"}),s("v-uni-text",{staticClass:"expression expression-xiaochulei"}),s("v-uni-text",{staticClass:"expression expression-wuliao"}),s("v-uni-text",{staticClass:"expression expression-xingxingyan"}),s("v-uni-text",{staticClass:"expression expression-xieyan"}),s("v-uni-text",{staticClass:"expression expression-xiasi"}),s("v-uni-text",{staticClass:"expression expression-xiaolian"})],1)],1)],1),s("use-popup",{attrs:{mode:"bottom"},model:{value:e.moreShow,callback:function(t){e.moreShow=t},expression:"moreShow"}},[s("v-uni-view",{staticClass:"more-area dflex dflex-wrap-w"},[s("v-uni-view",{staticClass:"use-hover more-item dflex-c dflex-flow-c",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.picture.apply(void 0,arguments)}}},[s("v-uni-view",{staticClass:"dflex-c bg-drak border-radius-c"},[s("v-uni-view",{staticClass:"iconfont icontupian"})],1),s("v-uni-text",[e._v("图片")])],1),s("v-uni-view",{staticClass:"use-hover more-item dflex-c dflex-flow-c"},[s("v-uni-view",{staticClass:"dflex-c bg-drak border-radius-c"},[s("v-uni-view",{staticClass:"iconfont iconyuyin"})],1),s("v-uni-text",[e._v("语音")])],1),s("v-uni-view",{staticClass:"use-hover more-item dflex-c dflex-flow-c"},[s("v-uni-view",{staticClass:"dflex-c bg-drak border-radius-c"},[s("v-uni-view",{staticClass:"iconfont iconshipin"})],1),s("v-uni-text",[e._v("视频")])],1),s("v-uni-view",{staticClass:"use-hover more-item dflex-c dflex-flow-c",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.order.apply(void 0,arguments)}}},[s("v-uni-view",{staticClass:"dflex-c bg-drak border-radius-c"},[s("v-uni-view",{staticClass:"iconfont icondingdan"})],1),s("v-uni-text",[e._v("订单")])],1),s("v-uni-view",{staticClass:"use-hover more-item dflex-c dflex-flow-c",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.product.apply(void 0,arguments)}}},[s("v-uni-view",{staticClass:"dflex-c bg-drak border-radius-c"},[s("v-uni-view",{staticClass:"iconfont iconchanpin"})],1),s("v-uni-text",[e._v("产品")])],1),s("v-uni-view",{staticClass:"use-hover more-item dflex-c dflex-flow-c",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.payment.apply(void 0,arguments)}}},[s("v-uni-view",{staticClass:"dflex-c bg-drak border-radius-c"},[s("v-uni-view",{staticClass:"iconfont iconfukuan"})],1),s("v-uni-text",[e._v("付款")])],1),s("v-uni-view",{staticClass:"use-hover more-item dflex-c dflex-flow-c"},[s("v-uni-view",{staticClass:"dflex-c bg-drak border-radius-c"},[s("v-uni-view",{staticClass:"iconfont iconqunliao1"})],1),s("v-uni-text",[e._v("创建群聊")])],1),s("v-uni-view",{staticClass:"use-hover more-item dflex-c dflex-flow-c",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.finish.apply(void 0,arguments)}}},[s("v-uni-view",{staticClass:"dflex-c bg-drak border-radius-c"},[s("v-uni-view",{staticClass:"iconfont iconshijian02"})],1),s("v-uni-text",[e._v("结束服务")])],1)],1)],1),s("use-popup",{staticClass:"oper-area-parent",attrs:{mode:"top"},model:{value:e.operShow,callback:function(t){e.operShow=t},expression:"operShow"}},[s("v-uni-view",{staticClass:"oper-area dflex pos-a padding-lr-sm",style:{top:e.operOffset.top,right:e.operOffset.right,left:e.operOffset.left}},[s("v-uni-view",{staticClass:"use-hover dflex-c dflex-flow-c",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toOper("复制")}}},[s("v-uni-view",{staticClass:"iconfont iconfuzhi-01"}),s("v-uni-text",[e._v("复制")])],1),s("v-uni-view",{staticClass:"use-hover dflex-c dflex-flow-c",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toOper("转发")}}},[s("v-uni-view",{staticClass:"iconfont iconzhuanfa-01"}),s("v-uni-text",[e._v("转发")])],1),s("v-uni-view",{staticClass:"use-hover dflex-c dflex-flow-c",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toOper("收藏")}}},[s("v-uni-view",{staticClass:"iconfont iconshoucang-01"}),s("v-uni-text",[e._v("收藏")])],1),s("v-uni-view",{staticClass:"use-hover dflex-c dflex-flow-c",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toOper("删除")}}},[s("v-uni-view",{staticClass:"iconfont iconshanchu-01"}),s("v-uni-text",[e._v("删除")])],1),s("v-uni-view",{staticClass:"use-hover dflex-c dflex-flow-c",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toOper("多选")}}},[s("v-uni-view",{staticClass:"iconfont iconduoxuan-011"}),s("v-uni-text",[e._v("多选")])],1),s("v-uni-view",{staticClass:"pos-a",class:[e.operTriangle],style:{top:e.operTriangleOffset.top,right:e.operTriangleOffset.right,left:e.operTriangleOffset.left}})],1)],1)],1)},o=[]},"2f16":function(e,t,s){var n=s("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.chat-content[data-v-3a1279c5]{bottom:%?110?%}.expression[data-v-3a1279c5]{font-size:%?56?%;width:12.5%}.chat-scroll .chat-item[data-v-3a1279c5]{margin-top:%?20?%;margin-bottom:%?20?%}.chat-scroll .chat-item .headimg[data-v-3a1279c5]{width:%?88?%;height:%?88?%;border-radius:50%}.chat-scroll .chat-item .chat-item-max[data-v-3a1279c5]{max-width:66vw}.chat-input[data-v-3a1279c5]{z-index:10090;bottom:0;height:%?100?%}.chat-input .iconfont[data-v-3a1279c5]{font-size:%?58?%}.chat-item uni-text[data-v-3a1279c5],\n.use-input uni-input[data-v-3a1279c5]{font-size:%?30?%\n  /* font-weight: 550; */}.use-input[data-v-3a1279c5]{height:%?76?%;line-height:%?76?%;background-color:#fff}.use-input uni-input[data-v-3a1279c5]{width:100%;height:%?76?%;line-height:%?76?%}.use-input uni-text[data-v-3a1279c5]{color:silver}.use-input .iconfont[data-v-3a1279c5]{font-size:%?44?%;color:silver}.face-area[data-v-3a1279c5], .more-area[data-v-3a1279c5]{height:29vh}.more-area[data-v-3a1279c5]{padding:2vw}.more-area .border-radius-c[data-v-3a1279c5]{width:%?100?%;height:%?100?%}.more-area .iconfont[data-v-3a1279c5]{font-size:%?54?%}.more-area uni-text[data-v-3a1279c5]{margin-top:%?6?%;font-size:%?26?%}.more-area .more-item[data-v-3a1279c5]{width:24vw}.oper-area[data-v-3a1279c5]{border-radius:%?10?%;background:#fff}.oper-area .use-hover[data-v-3a1279c5]{padding:%?20?% %?30?%}.oper-area .iconfont[data-v-3a1279c5]{font-size:%?40?%;line-height:1}.oper-area uni-text[data-v-3a1279c5]{margin-top:%?6?%;font-size:%?24?%}.oper-area .triangle-up[data-v-3a1279c5],\n.oper-area .triangle-down[data-v-3a1279c5]{width:20px;height:10px}.oper-area .triangle-up[data-v-3a1279c5]:after,\n.oper-area .triangle-down[data-v-3a1279c5]:after{top:0;right:0}',""]),e.exports=t},"43e5":function(e,t,s){"use strict";s.r(t);var n=s("dae1"),i=s.n(n);for(var o in n)"default"!==o&&function(e){s.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},"4e5b":function(e,t,s){var n=s("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.use-header[data-v-3a4e75e4], .use-header-placeholder[data-v-3a4e75e4]{height:44px;box-sizing:initial}',""]),e.exports=t},"524d":function(e,t,s){"use strict";s.r(t);var n=s("6e24"),i=s("a9cb");for(var o in i)"default"!==o&&function(e){s.d(t,e,(function(){return i[e]}))}(o);s("a34f");var a,r=s("f0c5"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"3a4e75e4",null,!1,n["a"],a);t["default"]=c.exports},"5b2f":function(e,t,s){"use strict";s("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={props:{icon:{type:[String,Boolean],default:"iconjiantou"},fixed:{type:[Number,Boolean],default:!0},placeholder:{type:[Number,Boolean],default:!0},back:{type:[Number,Boolean],default:!0},title:{type:String,default:"Ice·Chat"}},data:function(){return{statusBarHeight:"20px"}},created:function(){var e=this;this.$api.get_env((function(t){e.statusBarHeight=t.statusBarHeight+"px"}))},methods:{toback:function(){this.$emit("back",{type:"back"}),this.back&&uni.navigateBack()}}};t.default=n},"5c8c":function(e,t,s){var n=s("24fb");t=n(!1),t.push([e.i,'@font-face{font-family:expression;src:url(//at.alicdn.com/t/font_900373_o2q9oz0nivf.woff2?t=1616757390140) format("woff2"),url(//at.alicdn.com/t/font_900373_o2q9oz0nivf.woff?t=1616757390140) format("woff")}.expression{font-family:expression!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.expression-dianzan:before{content:"\\e775"}.expression-bushufu:before{content:"\\e75f"}.expression-bianbian:before{content:"\\e760"}.expression-fankun1:before{content:"\\e761"}.expression-feiwen:before{content:"\\e762"}.expression-ganmao:before{content:"\\e763"}.expression-huaixiao:before{content:"\\e764"}.expression-liuhan:before{content:"\\e765"}.expression-outu:before{content:"\\e766"}.expression-keshui:before{content:"\\e767"}.expression-renzhe:before{content:"\\e768"}.expression-santiaoxian:before{content:"\\e769"}.expression-guaiwu:before{content:"\\e76a"}.expression-shoushang:before{content:"\\e76b"}.expression-tianshi:before{content:"\\e76c"}.expression-shuai:before{content:"\\e76d"}.expression-xianwen:before{content:"\\e76e"}.expression-xiaodiaodaya:before{content:"\\e76f"}.expression-xiong:before{content:"\\e770"}.expression-yiwen:before{content:"\\e771"}.expression-yun:before{content:"\\e772"}.expression-liubixie:before{content:"\\e773"}.expression-shimo:before{content:"\\e774"}.expression-ku:before{content:"\\e75b"}.expression-shengqi:before{content:"\\e75c"}.expression-yousiliao:before{content:"\\e75d"}.expression-en:before{content:"\\e75e"}.expression-a:before{content:"\\e736"}.expression-bizui:before{content:"\\e737"}.expression-baiyan:before{content:"\\e738"}.expression-aixin:before{content:"\\e739"}.expression-dajing:before{content:"\\e73a"}.expression-ziya:before{content:"\\e73b"}.expression-daxiao:before{content:"\\e73c"}.expression-esi:before{content:"\\e73d"}.expression-fadai:before{content:"\\e73e"}.expression-fankun:before{content:"\\e73f"}.expression-ganga:before{content:"\\e740"}.expression-fennu:before{content:"\\e741"}.expression-hanyan:before{content:"\\e742"}.expression-jingkong:before{content:"\\e743"}.expression-haochi:before{content:"\\e744"}.expression-emo:before{content:"\\e745"}.expression-jingsong:before{content:"\\e746"}.expression-jingya:before{content:"\\e747"}.expression-kaixin:before{content:"\\e748"}.expression-lengku:before{content:"\\e749"}.expression-danao:before{content:"\\e74a"}.expression-liukoushui:before{content:"\\e74b"}.expression-liulei:before{content:"\\e74c"}.expression-mengbi:before{content:"\\e74d"}.expression-mianwubiaoqing:before{content:"\\e74e"}.expression-nanguo:before{content:"\\e74f"}.expression-shuizhuo:before{content:"\\e750"}.expression-taoyan:before{content:"\\e751"}.expression-tanchi:before{content:"\\e752"}.expression-siliao:before{content:"\\e753"}.expression-tiaopi:before{content:"\\e754"}.expression-xiaochulei:before{content:"\\e755"}.expression-wuliao:before{content:"\\e756"}.expression-xingxingyan:before{content:"\\e757"}.expression-xieyan:before{content:"\\e758"}.expression-xiasi:before{content:"\\e759"}.expression-xiaolian:before{content:"\\e75a"}',""]),e.exports=t},"6e24":function(e,t,s){"use strict";var n;s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return o})),s.d(t,"a",(function(){return n}));var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-uni-view",[s("v-uni-view",{staticClass:"use-header dflex dflex-b bg-drak w-full overflow-hidden",class:e.fixed?"fixed":"",style:{"padding-top":e.statusBarHeight}},[s("v-uni-view",{staticClass:"use-hover dflex",staticStyle:{"font-weight":"550"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toback.apply(void 0,arguments)}}},[e.icon?s("v-uni-view",{staticClass:"iconfont padding-tb padding-lr-sm rotate-180 pos-r",class:e.icon,staticStyle:{top:"-4rpx"}}):e._e(),s("v-uni-text",{staticClass:"fs-lg pos-r",staticStyle:{top:"-4rpx",left:"22rpx"}},[e._v(e._s(e.title))])],1),e._t("default")],2),e.fixed&&e.placeholder?s("v-uni-view",{staticClass:"use-header-placeholder",style:{"padding-top":e.statusBarHeight}}):e._e()],1)},o=[]},7225:function(e,t,s){var n=s("4e5b");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=s("4f06").default;i("281abcce",n,!0,{sourceMap:!1,shadowMode:!1})},"96dc":function(e,t,s){var n=s("5c8c");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=s("4f06").default;i("129af6a4",n,!0,{sourceMap:!1,shadowMode:!1})},a34f:function(e,t,s){"use strict";var n=s("7225"),i=s.n(n);i.a},a7e3:function(e,t,s){"use strict";s.r(t);var n=s("04bf"),i=s("43e5");for(var o in i)"default"!==o&&function(e){s.d(t,e,(function(){return i[e]}))}(o);s("b625");var a,r=s("f0c5"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"3a1279c5",null,!1,n["a"],a);t["default"]=c.exports},a9cb:function(e,t,s){"use strict";s.r(t);var n=s("5b2f"),i=s.n(n);for(var o in n)"default"!==o&&function(e){s.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},b625:function(e,t,s){"use strict";var n=s("c864"),i=s.n(n);i.a},c864:function(e,t,s){var n=s("2f16");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=s("4f06").default;i("6de44e56",n,!0,{sourceMap:!1,shadowMode:!1})},dae1:function(e,t,s){"use strict";var n=s("4ea4");s("4de4"),s("e25e"),s("ac1f"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n(s("96dc"));var i,o={data:function(){return{scrollIntoIndex:"",messageList:[],myUserInfo:{},textMsg:"",ToUserInfo:{},toUserid:"",emojiShow:!1,moreShow:!1,operShow:!1,operOffset:{top:"0",left:"30rpx",right:"initial"},operTriangleOffset:{top:"100%",left:"20%",right:"initial"},operTriangle:"triangle-down",imgs:["https://mall-os-api.use-cloud.com/files/upload/image/20200419/200419103944530621.png","https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=1776601493,3966748998&fm=26&gp=0.jpg","https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3446442004,2207547936&fm=26&gp=0.jpg"],moreDatas:[],tagShow:!1,tagDatas:[],scrollTop:0,scrollToView:"",scrollAnimation:!1,statusBarHeight:"20px"}},onPageScroll:function(e){this.scrollTop=e.scrollTop},onLoad:function(e){var t=this;uni.getStorage({key:"userLogin",success:function(e){console.log("获取成功",e),t.myUserInfo=e.data}}),this.getData(e.data),this.init(e.data);var s=parseInt(e.data);console.log(t.messageList.length),0==t.messageList.length&&(console.log("获取历史消息",s),uni.getStorage({key:"messageList"+s,success:function(e){console.log("获取历史消息成功"),t.messageList=e.data}}))},onShow:function(e){this.scrollToBottom()},methods:{scrollToBottom:function(){var e=this;this.$nextTick((function(){var t=e.messageList.length-1;e.scrollIntoIndex="chatItem_"+t}))},msgToScreen:function(e,t,s,n){console.log("构建消息");var i=this,o=parseInt(i.toUserid);if(t){var a={name:t,text:s,meFlag:!0};this.messageList.push(a),uni.setStorage({key:"messageList"+o,data:this.messageList,success:function(){console.log("存储成功")}}),console.log("nowUser",this.messageList)}else if(e){var r={name:e,text:s,profile:n};this.messageList.push(r),console.log("准备存储消息"),uni.setStorage({key:"messageList"+o,data:this.messageList,success:function(){console.log("存储成功")}}),console.log(this.messageList)}this.scrollToBottom()},send:function(){if(this.textMsg)if("undefined"==typeof WebSocket)console.log("您的浏览器不支持WebSocket");else{console.log("您的浏览器支持WebSocket");var e=parseInt(this.toUserid),t={from:this.toUserid,to:e,text:this.textMsg,type:2};i.send(JSON.stringify(t)),this.msgToScreen(null,this.myUserInfo.name,this.textMsg,null),this.textMsg=""}else console.log("请输入内容")},init:function(e){var t=this.myUserInfo.id,s=this;if("undefined"==typeof WebSocket)console.log("您的浏览器不支持WebSocket");else{console.log("您的浏览器支持WebSocket");var n="ws://localhost:9090/imserver/"+t;null!=i&&(i.close(),i=null),i=new WebSocket(n),i.onopen=function(){console.log("websocket已打开")},i.onmessage=function(e){console.log("收到数据===="+e.data);var n=JSON.parse(e.data);if(n.users)s.users=n.users.filter((function(e){return e.username!==t}));else{console.log("准备构建消息内容");var i=parseInt(s.toUserid);console.log(i),console.log("构建消息内容"),console.log("data.profile",n.profile),s.msgToScreen(n.from,null,n.text,n.profile)}},i.onclose=function(){console.log("websocket已关闭")},i.onerror=function(){console.log("websocket发生了错误"),console.log("WebSocket异常，请检查！"),that.closeWebScoket()}}},closeWebScoket:function(){var e=this;e.wsOnlion=!1,e.socketTask.close({success:function(t){e.wsOnlion=!1,console.log("列表界面websocket关闭成功",t)},fail:function(e){console.log("列表界面websocket关闭失败",e)}})},reconnect:function(){var e=this;e.initWebScoket(e.url)},getData:function(e){var t=this;this.toUserid=e,uni.request({url:this.serviceUrl+"/group/getGroupinfoByUserId/"+e,method:"GET",success:function(e){t.ToUserInfo=e.data.data.result,console.log("返回",t.toUserid,e)}}),console.log("获取用户未读信息","/"+this.myUserInfo.id+"/2/"+this.toUserid),uni.request({url:this.serviceUrl+"/message/getUnMessage/"+this.myUserInfo.id+"/2/"+this.toUserid,method:"GET",success:function(e){if(console.log("获取用户未读信息",e),console.log("构建消息未读信息内容"),400==e.data.code){console.log(e.data.data.data.length);for(var s=0;s<e.data.data.data.length;s++)console.log(s),t.msgToScreen(e.data.data.data[s].from,null,e.data.data.data[s].text,e.data.data.data[s].profile);console.log("获取用户未读信息",e.data.data.data)}}})},onFocus:function(e){console.log("onFocus",e),this.scrollToView="msg99"},onKeyboardChange:function(e){console.log("onKeyboardChange",e)},onChatContent:function(e){var t=this;console.log("onChatContent",e),console.log("onChatContent scrollTop",this.scrollTop);var s=e.currentTarget.dataset,n=s.type,i=uni.createSelectorQuery().in(this).selectAll("#".concat(e.currentTarget.id,", .oper-area-parent >>> .oper-area"));i.boundingClientRect((function(e){console.log("得到布局位置信息",e);var s=e[0];console.log("节点离页面顶部的距离为"+s.top),s.top<145?(t.operOffset.top=s.top+s.height+10+"px",t.operTriangle="triangle-up",t.operTriangleOffset.top="-10px"):(t.operOffset.top=s.top-85+"px",t.operTriangle="triangle-down",t.operTriangleOffset.top="100%"),t.operShow=!0})).exec(),"1"==n?(this.operOffset.left="30rpx",this.operOffset.right="initial",this.operTriangleOffset.left="20%",this.operTriangleOffset.right="initial"):"2"==n&&(this.operOffset.left="initial",this.operOffset.right="30rpx",this.operTriangleOffset.left="initial",this.operTriangleOffset.right="20%")},tomore:function(){},toback:function(){uni.navigateBack()},toUser:function(e){console.log(e),uni.navigateTo({url:"/pages/chat/user?data=".concat(e)})},toOper:function(e){uni.$emit("__on_im_send_msg","发送数据 msg: "+e),this.operShow=!1},picture:function(){uni.chooseImage({count:6,sizeType:["original","compressed"],sourceType:["album"],success:function(e){console.log(JSON.stringify(e.tempFilePaths))}})},checkPicture:function(e,t){console.log("我被点击了 啊~~~~~~~~"+t),uni.previewImage({urls:this.imgs,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(e){console.log("选中了第"+(e.tapIndex+1)+"个按钮,第"+(e.index+1)+"张图片")},fail:function(e){console.log(e.errMsg)}},success:function(e){console.log(e)}})},order:function(){uni.navigateTo({url:"/pages/chat/order"})},finish:function(){var e=this;uni.showModal({title:"提示",content:"确定结束服务吗？",confirmText:"结束",success:function(t){t.confirm?(console.log("用户点击确定"),uni.navigateTo({url:"/pages/chat/home"}),e.$api.msg("结束服务")):t.cancel&&console.log("用户点击取消")}})},product:function(){uni.navigateTo({url:"/pages/chat/product"})},payment:function(){uni.navigateTo({url:"/pages/chat/payment"})}}};t.default=o}}]);